<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bounce Daily - Complete Flow</title>
    <script src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.8.16/dist/dotlottie-wc.js" type="module"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="streak.css">
</head>
<body>
    <!-- SCREEN 1: Scooter Selection -->
    <div class="screen active" id="screen-scooter">
        <div class="header">
            <span class="back-btn">‚Üê</span>
            <div class="header-content">
                <div class="header-title">Select your scooter</div>
                <div class="header-subtitle">Same scooter. Different speeds. Choose one.</div>
            </div>
        </div>

        <div class="container">
            <div class="scooter-image">
                <div class="scooter-placeholder">üõµ</div>
            </div>

            <!-- High Speed Scooter -->
            <div class="scooter-card selected" id="scooter-high">
                <div class="scooter-header">HIGH SPEED SCOOTER</div>
                <div class="scooter-details">
                    <div class="scooter-row">
                        <div class="label">Driving License Required</div>
                        <div class="value">YES</div>
                    </div>
                    <div class="scooter-row">
                        <div class="label">Top Speed</div>
                        <div class="value">60k mph</div>
                    </div>
                    <div class="scooter-row">
                        <div class="label">Pricing Starts</div>
                        <div class="value">Rs. X/day</div>
                    </div>
                </div>
                <div class="scooter-action">
                    <button class="scooter-btn primary">Selected</button>
                </div>
            </div>

            <!-- Low Speed Scooter -->
            <div class="scooter-card" id="scooter-low">
                <div class="scooter-header" style="background: linear-gradient(135deg, #86868b 0%, #636366 100%);">LOW SPEED SCOOTER</div>
                <div class="scooter-details">
                    <div class="scooter-row">
                        <div class="label">Driving License Required</div>
                        <div class="value">NO</div>
                    </div>
                    <div class="scooter-row">
                        <div class="label">Top Speed</div>
                        <div class="value">25k mph</div>
                    </div>
                    <div class="scooter-row">
                        <div class="label">Pricing Starts</div>
                        <div class="value">Rs. X/day</div>
                    </div>
                </div>
                <div class="scooter-action">
                    <button class="scooter-btn secondary" onclick="selectScooter('low')">Select</button>
                </div>
            </div>
        </div>

        <div class="bottom-cta">
            <button class="cta-button" onclick="goToPlans()">Next</button>
        </div>
    </div>

    <!-- SCREEN 2: Plan Selection -->
    <div class="screen" id="screen-plans">
        <div class="header">
            <span class="back-btn" onclick="goToScooter()">‚Üê</span>
            <div class="header-content">
                <div class="header-title">Select your plan</div>
            </div>
            <!-- Streak Badge -->
            <div class="streak-badge" id="streakBadge" onclick="openStreakHistory()">
                <span class="streak-badge-count" id="streakBadgeCount">15</span>
                <dotlottie-wc
                    src="./Fire Streak Orange.lottie"
                    autoplay loop
                    class="streak-badge-lottie"
                ></dotlottie-wc>
            </div>
        </div>

        <div class="bike-type-indicator">
            <div class="bike-icon">üèçÔ∏è</div>
            <div class="bike-label">High Speed Plans</div>
        </div>

        <div class="container">
            <!-- Recommended Plan Section -->
            <div class="section-title">Recommended Plan</div>

            <!-- 7 Day Hero Card -->
            <div class="hero-plan-card" data-duration="7day" data-price="1749">
                <div class="hero-radio"></div>
                <div class="hero-content">
                    <div class="hero-left">
                        <div class="hero-duration">7 Day</div>
                        <div class="hero-details">‚Çπ250/day ‚Ä¢ Unlimited km</div>
                    </div>
                    <div class="hero-badge">‚Çπ1749/week</div>
                </div>
                <div class="hero-cta-container">
                    <button class="hero-cta-btn">Select KM</button>
                </div>
            </div>

            <!-- Other Plans -->
            <div class="section-title">Other plans</div>

            <div class="plan-card" data-duration="3day" data-price="900">
                <div class="plan-card-main">
                    <div class="plan-radio"></div>
                    <div class="plan-left">
                        <div class="plan-duration">3 Day</div>
                        <div class="plan-details">‚Çπ300/day ‚Ä¢ 300 km</div>
                    </div>
                    <div class="plan-price-box">
                        <div class="plan-price">‚Çπ900</div>
                        <div class="plan-price-label">total</div>
                    </div>
                </div>
                <div class="plan-cta-container">
                    <button class="plan-cta-btn">Select KM</button>
                </div>
            </div>

            <div class="plan-card" data-duration="14day" data-price="3799">
                <div class="plan-card-main">
                    <div class="plan-radio"></div>
                    <div class="plan-left">
                        <div class="plan-duration">14 Day</div>
                        <div class="plan-details">‚Çπ271/day ‚Ä¢ 1400 km</div>
                    </div>
                    <div class="plan-price-box">
                        <div class="plan-price">‚Çπ3799</div>
                        <div class="plan-price-label">total</div>
                    </div>
                </div>
                <div class="plan-cta-container">
                    <button class="plan-cta-btn">Select KM</button>
                </div>
            </div>

            <div class="plan-card" data-duration="1day" data-price="300">
                <div class="plan-card-main">
                    <div class="plan-radio"></div>
                    <div class="plan-left">
                        <div class="plan-duration">1 Day</div>
                        <div class="plan-details">‚Çπ300/day ‚Ä¢ 100 km</div>
                    </div>
                    <div class="plan-price-box">
                        <div class="plan-price">‚Çπ300</div>
                        <div class="plan-price-label">total</div>
                    </div>
                </div>
                <div class="plan-cta-container">
                    <button class="plan-cta-btn">Select KM</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== BOTTOM SHEETS ========== -->
    <div class="overlay" id="overlay" onclick="closeAllSheets()"></div>

    <!-- 7 Day Options -->
    <div class="review-sheet" id="sheet-7day">
        <div class="sheet-handle"></div>
        <h2 class="sheet-title">Choose Your 7-Day Plan</h2>

        <div class="option-card" onclick="selectOption('7day', 1749, '‚Çπ250', '7 Days', 'Unlimited')">
            <div class="option-badge">BEST VALUE</div>
            <div class="option-radio"></div>
            <div class="option-main">
                <div class="option-km-section">
                    <div class="km-badge unlimited">‚àû Unlimited KM</div>
                </div>
                <div class="option-pricing">
                    <h3>‚Çπ1749</h3>
                    <p>‚Çπ250 √ó 7 days</p>
                </div>
            </div>
            <div class="activation-note">
                <div class="icon">üéÅ</div>
                <div class="text">
                    <strong>‚Çπ2000 Activation Pack</strong><br>
                    One-time ‚Ä¢ Unlocks lowest rent
                </div>
            </div>
        </div>

        <div class="option-card" onclick="selectOption('7day', 2299, '‚Çπ328', '7 Days', 'Unlimited')">
            <div class="option-radio"></div>
            <div class="option-main">
                <div class="option-km-section">
                    <div class="km-badge unlimited">‚àû Unlimited KM</div>
                </div>
                <div class="option-pricing">
                    <h3>‚Çπ2299</h3>
                    <p>‚Çπ328 √ó 7 days</p>
                </div>
            </div>
            <div class="no-activation">No activation pack needed</div>
        </div>

        <div class="option-card" onclick="selectOption('7day', 1749, '‚Çπ250', '7 Days', '700km')">
            <div class="option-radio"></div>
            <div class="option-main">
                <div class="option-km-section">
                    <div class="km-badge limited">700 km</div>
                </div>
                <div class="option-pricing">
                    <h3>‚Çπ1749</h3>
                    <p>‚Çπ250 √ó 7 days</p>
                </div>
            </div>
            <div class="activation-note">
                <div class="icon">üí∞</div>
                <div class="text">
                    <strong>‚Çπ1000 One-time fee</strong><br>
                    For reduced weekly rent
                </div>
            </div>
        </div>

        <div class="option-card" onclick="selectOption('7day', 1999, '‚Çπ286', '7 Days', '700km')">
            <div class="option-radio"></div>
            <div class="option-main">
                <div class="option-km-section">
                    <div class="km-badge limited">700 km</div>
                </div>
                <div class="option-pricing">
                    <h3>‚Çπ1999</h3>
                    <p>‚Çπ286 √ó 7 days</p>
                </div>
            </div>
            <div class="no-activation">No activation pack needed</div>
        </div>

        <div class="sheet-footer">
            üí° Onboarding & security deposit same for all plans
        </div>
    </div>

    <!-- 3 Day Options -->
    <div class="review-sheet" id="sheet-3day">
        <div class="sheet-handle"></div>
        <h2 class="sheet-title">Choose Your 3-Day Plan</h2>

        <div class="option-card" onclick="selectOption('3day', 900, '‚Çπ300', '3 Days', 'Unlimited')">
            <div class="option-radio"></div>
            <div class="option-main">
                <div class="option-km-section">
                    <div class="km-badge unlimited">‚àû Unlimited KM</div>
                </div>
                <div class="option-pricing">
                    <h3>‚Çπ900</h3>
                    <p>‚Çπ300 √ó 3 days</p>
                </div>
            </div>
            <div class="activation-note">
                <div class="icon">üéÅ</div>
                <div class="text">
                    <strong>‚Çπ2000 Activation Pack</strong><br>
                    One-time ‚Ä¢ Unlocks lowest rent
                </div>
            </div>
        </div>

        <div class="option-card" onclick="selectOption('3day', 1029, '‚Çπ343', '3 Days', 'Unlimited')">
            <div class="option-radio"></div>
            <div class="option-main">
                <div class="option-km-section">
                    <div class="km-badge unlimited">‚àû Unlimited KM</div>
                </div>
                <div class="option-pricing">
                    <h3>‚Çπ1029</h3>
                    <p>‚Çπ343 √ó 3 days</p>
                </div>
            </div>
            <div class="no-activation">No activation pack needed</div>
        </div>

        <div class="option-card" onclick="selectOption('3day', 900, '‚Çπ300', '3 Days', '300km')">
            <div class="option-radio"></div>
            <div class="option-main">
                <div class="option-km-section">
                    <div class="km-badge limited">300 km</div>
                </div>
                <div class="option-pricing">
                    <h3>‚Çπ900</h3>
                    <p>‚Çπ300 √ó 3 days</p>
                </div>
            </div>
            <div class="no-activation">No activation pack needed</div>
        </div>

        <div class="sheet-footer">
            üí° Onboarding & security deposit same for all plans
        </div>
    </div>

    <!-- 14 Day Options -->
    <div class="review-sheet" id="sheet-14day">
        <div class="sheet-handle"></div>
        <h2 class="sheet-title">Choose Your 14-Day Plan</h2>

        <div class="option-card" onclick="selectOption('14day', 3799, '‚Çπ271', '14 Days', '1400km')">
            <div class="option-radio"></div>
            <div class="option-main">
                <div class="option-km-section">
                    <div class="km-badge limited">1400 km</div>
                </div>
                <div class="option-pricing">
                    <h3>‚Çπ3799</h3>
                    <p>‚Çπ271 √ó 14 days</p>
                </div>
            </div>
            <div class="no-activation">No activation pack needed</div>
        </div>

        <div class="sheet-footer">
            üí° Onboarding & security deposit same for all plans
        </div>
    </div>

    <!-- 1 Day Options -->
    <div class="review-sheet" id="sheet-1day">
        <div class="sheet-handle"></div>
        <h2 class="sheet-title">Choose Your 1-Day Plan</h2>

        <div class="option-card" onclick="selectOption('1day', 300, '‚Çπ300', '1 Day', '100km')">
            <div class="option-radio"></div>
            <div class="option-main">
                <div class="option-km-section">
                    <div class="km-badge limited">100 km</div>
                </div>
                <div class="option-pricing">
                    <h3>‚Çπ300</h3>
                    <p>‚Çπ300 √ó 1 day</p>
                </div>
            </div>
            <div class="no-activation">No activation pack needed</div>
        </div>

        <div class="sheet-footer">
            üí° Onboarding & security deposit same for all plans
        </div>
    </div>

    <!-- Final Review Confirmation Sheet -->
    <div class="review-sheet" id="review-confirmation">
        <div class="sheet-handle"></div>
        <h2 class="sheet-title">Review Your Ride Plan</h2>

        <div class="review-section">
            <div class="review-section-title">Bike Selected</div>
            <div class="review-row">
                <div class="review-label">Hub</div>
                <div class="review-value">Name of the Hub</div>
            </div>
            <div class="review-row">
                <div class="review-label">Bike Selected</div>
                <div class="review-value" id="review-bike">High Speed</div>
            </div>
            <div class="review-row">
                <div class="review-label">Driving License</div>
                <div class="review-value success">NOT REQUIRED</div>
            </div>
        </div>

        <div class="review-section">
            <div class="review-section-title">Plan Selected</div>
            <div class="review-row">
                <div class="review-label">Plan</div>
                <div class="review-value price" id="review-plan-price">‚Çπ270/day</div>
            </div>
            <div class="review-row">
                <div class="review-label">Validity</div>
                <div class="review-value" id="review-validity">14 Days</div>
            </div>
            <div class="review-row">
                <div class="review-label">Distance</div>
                <div class="review-value" id="review-distance">1400km</div>
            </div>
        </div>

        <div class="total-amount">
            <div class="total-label">Total Amount</div>
            <div class="total-price" id="review-total">‚Çπ3799</div>
        </div>

        <button class="cta-button" onclick="confirmPlan()">Confirm</button>
    </div>

    <!-- ========== STREAK CELEBRATION POPUP ========== -->
    <div class="streak-celebration-overlay" id="streakCelebration">
        <canvas id="confettiCanvas" class="confetti-canvas"></canvas>
        <div class="streak-celebration-content">
            <img src="./bounce_daily_logo.png" alt="Bounce Daily" class="celebration-logo">

            <dotlottie-wc
                src="./Streak.lottie"
                autoplay loop
                class="celebration-lottie"
            ></dotlottie-wc>

            <div class="celebration-streak-count" id="celebrationCount">15</div>
            <div class="celebration-headline">Day Streak!</div>
            <div class="celebration-subtext">You've unlocked a special discount</div>

            <div class="celebration-price-section" id="celebrationPriceSection">
                <div class="celebration-original-price" id="celebrationOriginal">‚Çπ1749</div>
                <div class="celebration-arrow">‚Üí</div>
                <div class="celebration-new-price" id="celebrationNew">‚Çπ1574</div>
                <div class="celebration-discount-tag" id="celebrationDiscountTag">10% OFF</div>
            </div>

            <button class="celebration-cta" onclick="claimDiscount()">
                Claim Discount üî•
            </button>

            <div class="celebration-skip" onclick="dismissCelebration()">Maybe later</div>
        </div>
    </div>

    <!-- ========== STREAK HISTORY PANEL ========== -->
    <div class="streak-history-overlay" id="streakHistory">
        <div class="streak-history-panel">
            <!-- Header -->
            <div class="streak-history-header">
                <button class="streak-history-close" onclick="closeStreakHistory()">‚úï</button>
                <img src="./bounce_daily_logo.png" alt="Bounce Daily" class="streak-history-logo">
            </div>

            <!-- Hero -->
            <div class="streak-hero-section">
                <dotlottie-wc
                    src="./Fire Streak Orange.lottie"
                    autoplay loop
                    class="streak-hero-lottie"
                ></dotlottie-wc>
                <div class="streak-hero-count" id="historyStreakCount">15</div>
                <div class="streak-hero-label">day streak</div>
                <div class="streak-hero-longest" id="historyLongest">Longest: 22 days</div>
            </div>

            <!-- Current Discount -->
            <div class="streak-discount-card">
                <div class="streak-discount-value" id="historyDiscountValue">10%</div>
                <div class="streak-discount-label" id="historyDiscountLabel">discount on next renewal</div>
            </div>

            <!-- Activity Grid -->
            <div class="streak-activity-section">
                <div class="streak-section-header">
                    <div class="streak-activity-title">Last 30 Days</div>
                    <div class="streak-activity-subtitle">Rental activity</div>
                </div>
                <div class="streak-day-labels">
                    <div class="streak-day-label">M</div>
                    <div class="streak-day-label">T</div>
                    <div class="streak-day-label">W</div>
                    <div class="streak-day-label">T</div>
                    <div class="streak-day-label">F</div>
                    <div class="streak-day-label">S</div>
                    <div class="streak-day-label">S</div>
                </div>
                <div class="streak-activity-grid" id="activityGrid"></div>
                <div class="streak-activity-legend">
                    <span class="legend-item"><span class="legend-dot active"></span> Active</span>
                    <span class="legend-item"><span class="legend-dot inactive"></span> Missed</span>
                </div>
            </div>

            <!-- Milestones -->
            <div class="streak-milestones-section">
                <div class="streak-milestones-title">Milestones & Rewards</div>
                <div class="milestones-list" id="milestonesList"></div>
            </div>

            <!-- Restores -->
            <div class="streak-restores">
                <div class="streak-restores-title">Streak Restores Available</div>
                <div class="streak-restores-count" id="restoresCount">1</div>
            </div>
        </div>
    </div>

    <!-- ========== SCENARIO TOOLBAR (Demo) ========== -->
    <div class="scenario-toolbar" id="scenarioToolbar">
        <div class="scenario-toggle" onclick="document.getElementById('scenarioToolbar').classList.toggle('expanded')">
            <span class="scenario-toggle-icon">üéõÔ∏è</span>
        </div>
        <div class="scenario-buttons">
            <button class="scenario-btn" data-scenario="newUser" onclick="applyScenario('newUser')">New User</button>
            <button class="scenario-btn" data-scenario="buildingUp" onclick="applyScenario('buildingUp')">Building Up</button>
            <button class="scenario-btn" data-scenario="firstMilestone" onclick="applyScenario('firstMilestone')">7-Day</button>
            <button class="scenario-btn active" data-scenario="regularRider" onclick="applyScenario('regularRider')">Regular</button>
            <button class="scenario-btn" data-scenario="powerUser" onclick="applyScenario('powerUser')">Power</button>
            <button class="scenario-btn" data-scenario="maxStreak" onclick="applyScenario('maxStreak')">Max</button>
            <button class="scenario-btn" data-scenario="lapsed" onclick="applyScenario('lapsed')">Lapsed</button>
        </div>
    </div>

    <!-- Scripts (order matters: confetti ‚Üí streak ‚Üí app) -->
    <script src="confetti.js"></script>
    <script src="streak.js"></script>
    <script src="app.js"></script>
</body>
</html>
